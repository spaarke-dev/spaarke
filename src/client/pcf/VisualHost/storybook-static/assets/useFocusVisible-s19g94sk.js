import{r as c}from"./index-D4H_InIO.js";import{c as E,K as l,d as b,a as d,u as g}from"./constants-C-FBwxq0.js";function f(e,o){var t;const n=e;var r;return!!(!(n==null||(t=n.ownerDocument)===null||t===void 0)&&t.defaultView&&n instanceof n.ownerDocument.defaultView[(r=void 0)!==null&&r!==void 0?r:"HTMLElement"])}function V(e,o){if(m(e))return()=>{};const t={current:void 0},n=E(o);function r(i){n.isNavigatingWithKeyboard()&&f(i)&&(t.current=i,i.setAttribute(d,""))}function u(){t.current&&(t.current.removeAttribute(d),t.current=void 0)}n.subscribe(i=>{i?r(o.document.activeElement):u()});const s=i=>{u();const v=i.composedPath()[0];r(v)},a=i=>{(!i.relatedTarget||f(i.relatedTarget)&&!e.contains(i.relatedTarget))&&u()};return e.addEventListener(l,s),e.addEventListener("focusout",a),e.focusVisible=!0,e.contains(o.document.activeElement)&&r(o.document.activeElement),()=>{u(),e.removeEventListener(l,s),e.removeEventListener("focusout",a),e.focusVisible=void 0,b(n)}}function m(e){return e?e.focusVisible?!0:m(e==null?void 0:e.parentElement):!1}function L(e={}){const o=g(),t=c.useRef(null);var n;const r=(n=e.targetDocument)!==null&&n!==void 0?n:o.targetDocument;return c.useEffect(()=>{if(r!=null&&r.defaultView&&t.current)return V(t.current,r.defaultView)},[t,r]),t}export{L as u};
