import{r as l}from"./index-D4H_InIO.js";import{m as Be,T as Q,t as k}from"./Text-C0fEdKO1.js";import{_ as J,i as M,a5 as ue,z as Ae,K as Ve,r as ye,c as ce,k as H,a6 as He,v as Se,x as Ee,B as xe,a7 as Me,a8 as Pe,s as de,p as $,m as he,o as ne,C as Ne,D as Ce,a9 as Ie,f as U,h as be,g as Te,d as ge,F as pe,H as we,l as ke,aa as ee,ab as te,ac as Oe,N as Fe,ad as Re,ae as We,X as I,af as ae,ag as ze,ah as G,ai as ve,aj as re,ak as Y,V as ie,W as oe,q as Xe,al as Ge,am as Ye,an as qe,ao as je,ap as Ue,aq as Ke,L as Ze,J as $e,ar as Je,as as Qe,a4 as et}from"./Legends-DUpH8z2n.js";import{T as K,a as tt,C as at,d as rt}from"./CartesianChart-L8mYIb7a.js";import{ChartHoverCard as se}from"./ChartHoverCard-ScuzKI_J.js";import{g as S}from"./gradients-B-09CRJk.js";function it(d){return d.clientWidth<d.scrollWidth}function ot(d){return d.clientHeight<d.scrollHeight}function Le(d){return it(d)||ot(d)}var lt={position:"absolute",width:1,height:1,margin:-1,padding:0,border:0,overflow:"hidden",whiteSpace:"nowrap"},j;(function(d){d[d.Parent=0]="Parent",d[d.Self=1]="Self"})(j||(j={}));var nt=ce(),st=(function(d){J(s,d);function s(r){var a=d.call(this,r)||this;return a._tooltipHost=l.createRef(),a._defaultTooltipId=M("tooltip"),a.show=function(){a._toggleTooltip(!0)},a.dismiss=function(){a._hideTooltip()},a._getTargetElement=function(){if(a._tooltipHost.current){var e=a.props.overflowMode;if(e!==void 0)switch(e){case j.Parent:return a._tooltipHost.current.parentElement;case j.Self:return a._tooltipHost.current}return a._tooltipHost.current}},a._onTooltipFocus=function(e){if(a._ignoreNextFocusEvent){a._ignoreNextFocusEvent=!1;return}a._onTooltipMouseEnter(e)},a._onTooltipContentFocus=function(e){s._currentVisibleTooltip&&s._currentVisibleTooltip!==a&&s._currentVisibleTooltip.dismiss(),s._currentVisibleTooltip=a,a._clearDismissTimer(),a._clearOpenTimer()},a._onTooltipBlur=function(e){var t;a._ignoreNextFocusEvent=((t=ue(a.context))===null||t===void 0?void 0:t.activeElement)===e.target,a._dismissTimerId=a._async.setTimeout(function(){a._hideTooltip()},0)},a._onTooltipMouseEnter=function(e){var t=a.props,i=t.overflowMode,o=t.delay,n=ue(a.context);if(s._currentVisibleTooltip&&s._currentVisibleTooltip!==a&&s._currentVisibleTooltip.dismiss(),s._currentVisibleTooltip=a,i!==void 0){var g=a._getTargetElement();if(g&&!Le(g))return}if(!(e.target&&Ae(e.target,a._getTargetElement(),n)))if(a._clearDismissTimer(),a._clearOpenTimer(),o!==K.zero){var u=a._getDelayTime(o);a._openTimerId=a._async.setTimeout(function(){a._toggleTooltip(!0)},u)}else a._toggleTooltip(!0)},a._onTooltipMouseLeave=function(e){var t=a.props.closeDelay;a._clearDismissTimer(),a._clearOpenTimer(),t?a._dismissTimerId=a._async.setTimeout(function(){a._toggleTooltip(!1)},t):a._toggleTooltip(!1),s._currentVisibleTooltip===a&&(s._currentVisibleTooltip=void 0)},a._onTooltipKeyDown=function(e){(e.which===Ve.escape||e.ctrlKey)&&a.state.isTooltipVisible&&(a._hideTooltip(),e.stopPropagation())},a._clearDismissTimer=function(){a._async.clearTimeout(a._dismissTimerId)},a._clearOpenTimer=function(){a._async.clearTimeout(a._openTimerId)},a._hideTooltip=function(){a._clearOpenTimer(),a._clearDismissTimer(),a._toggleTooltip(!1)},a._toggleTooltip=function(e){a.state.isTooltipVisible!==e&&a.setState({isTooltipVisible:e},function(){return a.props.onTooltipToggle&&a.props.onTooltipToggle(e)})},a._getDelayTime=function(e){switch(e){case K.medium:return 300;case K.long:return 500;default:return 0}},ye(a),a.state={isAriaPlaceholderRendered:!1,isTooltipVisible:!1},a}return s.prototype.render=function(){var r=this.props,a=r.calloutProps,e=r.children,t=r.content,i=r.directionalHint,o=r.directionalHintForRTL,n=r.hostClassName,g=r.id,u=r.setAriaDescribedBy,f=u===void 0?!0:u,p=r.tooltipProps,_=r.styles,y=r.theme;this._classNames=nt(_,{theme:y,className:n});var B=this.state.isTooltipVisible,c=g||this._defaultTooltipId,v=H(H({id:"".concat(c,"--tooltip"),content:t,targetElement:this._getTargetElement(),directionalHint:i,directionalHintForRTL:o,calloutProps:He({},a,{onDismiss:this._hideTooltip,onFocus:this._onTooltipContentFocus,onMouseEnter:this._onTooltipMouseEnter,onMouseLeave:this._onTooltipMouseLeave}),onMouseEnter:this._onTooltipMouseEnter,onMouseLeave:this._onTooltipMouseLeave},Se(this.props,Ee,["id"])),p),h=p!=null&&p.onRenderContent?p.onRenderContent(v,function(T){return T!=null&&T.content?l.createElement(l.Fragment,null,T.content):null}):t,x=B&&!!h,b=f&&B&&h?c:void 0;return l.createElement("div",{className:this._classNames.root,ref:this._tooltipHost,onFocusCapture:this._onTooltipFocus,onBlurCapture:this._onTooltipBlur,onMouseEnter:this._onTooltipMouseEnter,onMouseLeave:this._onTooltipMouseLeave,onKeyDown:this._onTooltipKeyDown,role:"none","aria-describedby":b},e,x&&l.createElement(tt,H({},v)),l.createElement("div",{hidden:!0,id:c,style:lt},h))},s.prototype.componentDidMount=function(){this._async=new xe(this)},s.prototype.componentWillUnmount=function(){s._currentVisibleTooltip&&s._currentVisibleTooltip===this&&(s._currentVisibleTooltip=void 0),this._async.dispose()},s.defaultProps={delay:K.medium},s.contextType=Me,s})(l.Component),ct={root:"ms-TooltipHost",ariaPlaceholder:"ms-TooltipHost-aria-placeholder"},dt=function(d){var s=d.className,r=d.theme,a=Pe(ct,r);return{root:[a.root,{display:"inline"},s]}},ut=de(st,dt,void 0,{scope:"TooltipHost"}),ht=function(d){if(!(d.length<2)){d=d.sort(function(t,i){return t instanceof Date?t.getTime()-i.getTime():t-i});for(var s=Number.MAX_VALUE,r=1;r<d.length;r++){var a=d[r]instanceof Date?d[r].getTime()-d[r-1].getTime():d[r]-d[r-1];s=Math.min(s,a)}var e=d[0]instanceof Date?d[d.length-1].getTime()-d[0].getTime():d[d.length-1]-d[0];return[s,e]}},gt=function(d,s,r){var a=ht(d);if(!a||a[1]===0)return 16;var e=a[0],t=a[1],i=Math.floor(s*e*(1-r)/(t+e*(1-r)));return i},_e=function(d,s,r){return r===void 0&&(r=0),d-(s.left||0)-(s.right||0)-r*2},De=function(d,s){var r=s/(1-s);return d+(d-1)*r},le=function(d,s,r){return d*De(s,r)},pt=function(d,s,r){return d/De(s,r)},vt=(function(d){J(s,d);function s(r){var a=d.call(this,r)||this;return a._tooltipChild=l.createRef(),a._checkTextOverflow=function(){var e=a._getTargetElement(),t=!!e&&Le(e);t!==a.state.textOverflow&&a.setState({textOverflow:t})},a._getTargetElement=function(){if(!(!a._tooltipChild.current||!a._tooltipChild.current.parentElement))return a._tooltipChild.current.parentElement},a.state={textOverflow:!1},a._async=new xe(a),a}return s.prototype.render=function(){var r=this.props,a=r.className,e=r.content,t=r.accessibilityData;return l.createElement(ut,{overflowMode:j.Self,hostClassName:a,content:e},l.createElement("span",H({},$(t),{ref:this._tooltipChild,"data-is-focusable":this.state.textOverflow}),e))},s.prototype.componentDidMount=function(){var r=this._getTargetElement();window.ResizeObserver&&r&&(this._resizeObserver=new ResizeObserver(this._async.debounce(this._checkTextOverflow,500)),this._resizeObserver.observe(r))},s.prototype.componentWillUnmount=function(){var r;(r=this._resizeObserver)===null||r===void 0||r.disconnect(),this._async.dispose()},s})(l.Component),fe=ce(),_t=(function(d){J(s,d);function s(r){var a=d.call(this,r)||this;return a._isRTL=Te(),a._handleChartMouseLeave=function(){a._calloutAnchorPoint=null,a.state.isCalloutVisible&&a.setState({isCalloutVisible:!1,hoverValue:"",refSelected:null,lineColor:"",legend:""})},a._adjustProps=function(){a._barHeight=a.props.barHeight||12,a._classNames=fe(a.props.styles,{theme:a.props.theme,width:a.props.width,className:a.props.className,barHeight:a._barHeight,color:a.state.lineColor,variant:a.props.variant,hideLabels:a.props.hideLabels})},a._getChartDataText=function(e){return a.props.barChartCustomData?l.createElement("div",{role:"text"},a.props.barChartCustomData(e)):a._getDefaultTextData(e)},a._closeCallout=function(){a.setState({isCalloutVisible:!1})},a._getAriaLabel=function(e){var t,i=e.xAxisCalloutData||e.legend,o=e.data,n=e.yAxisCalloutData||(e.horizontalBarChartdata?"".concat(e.horizontalBarChartdata.x,"/").concat(e.horizontalBarChartdata.y):0);return((t=e.callOutAccessibilityData)===null||t===void 0?void 0:t.ariaLabel)||(i?"".concat(i,", "):"")+"".concat(n,".")+(o?"with benchmark at "+"".concat(o,", "):"")},a.state={isCalloutVisible:!1,hoverValue:"",lineColor:"",legend:"",refSelected:null,color:"",xCalloutValue:"",yCalloutValue:"",barSpacingInPercent:0},a._refArray=[],a._uniqLineText="_HorizontalLine_"+Math.random().toString(36).substring(7),a._hoverOff=a._hoverOff.bind(a),a._calloutId=M("callout"),a._emptyChartId=M("_HBC_empty"),a.barChartSvgRef=l.createRef(),a}return s.prototype.componentDidMount=function(){var r,a=((r=this.barChartSvgRef.current)===null||r===void 0?void 0:r.getBoundingClientRect().width)||0,e=3;if(a){var t=e/a*100;this.setState({barSpacingInPercent:t})}},s.prototype.render=function(){var r=this,a=this.props,e=a.data,t=a.theme;this._adjustProps();var i=t.palette,o=0;return this._isChartEmpty()?l.createElement("div",{id:this._emptyChartId,role:"alert",style:{opacity:"0"},"aria-label":"Graph has no data to display"}):l.createElement("div",{className:this._classNames.root,onMouseLeave:this._handleChartMouseLeave},e.map(function(n,g){n.chartData&&n.chartData[0]&&n.chartData[0].horizontalBarChartdata.x?o=n.chartData[0].horizontalBarChartdata.x:o=0,n.chartData[1]={legend:"",horizontalBarChartdata:{x:n.chartData[0].horizontalBarChartdata.y-o,y:n.chartData[0].horizontalBarChartdata.y},color:i.neutralLight};var u=r.props.variant===W.AbsoluteScale?null:r._getChartDataText(n),f=r._createBars(n,i,g),p=r._uniqLineText+"_"+g,_=fe(r.props.styles,{theme:r.props.theme,width:r.props.width,showTriangle:!!n.chartData[0].data,variant:r.props.variant});return l.createElement("div",{key:g},l.createElement("div",{className:_.items},l.createElement(he,{direction:ne.horizontal},l.createElement("div",{className:r._classNames.chartTitle},n.chartTitle&&l.createElement(vt,{className:r._classNames.chartTitleLeft,content:n.chartTitle,accessibilityData:n.chartTitleAccessibilityData}),u)),n.chartData[0].data&&r._createBenchmark(n),l.createElement(he,{direction:ne.horizontal,className:r._classNames.chartWrapper},l.createElement("svg",{ref:r.barChartSvgRef,className:r._classNames.chart,"aria-label":n.chartTitle},l.createElement("g",{id:p,key:p,ref:function(y){r._refCallback(y,n.chartData[0].legend)},onClick:function(){var y=n.chartData[0];y&&y.onClick&&y.onClick()}},f)))))}),l.createElement(Ne,H({target:this.state.refSelected,coverTarget:!0,isBeakVisible:!1,gapSpace:30,hidden:!(!this.props.hideTooltip&&this.state.isCalloutVisible),directionalHint:Ce.topAutoEdge,id:this._calloutId,onDismiss:this._closeCallout,preventDismissOnLostFocus:!0},this.props.calloutProps,$(this.state.callOutAccessibilityData)),l.createElement(l.Fragment,null,this.props.onRenderCalloutPerHorizontalBar?this.props.onRenderCalloutPerHorizontalBar(this.state.barCalloutProps):l.createElement(se,{Legend:this.state.xCalloutValue?this.state.xCalloutValue:this.state.legend,YValue:this.state.yCalloutValue?this.state.yCalloutValue:this.state.hoverValue,color:this.state.lineColor,culture:this.props.culture}))))},s.prototype._refCallback=function(r,a){this._refArray.push({index:a,refElement:r})},s.prototype._hoverOn=function(r,a){var e,t,i,o;if((!this.state.isCalloutVisible||this.state.legend!==a.legend)&&this._calloutAnchorPoint!==a){var n=Ie(this._refArray,function(f){return f.index===a.legend});this._calloutAnchorPoint=a;var g=a.color;if(this.props.enableGradient){var u=Math.max(((t=(e=this.props.data)===null||e===void 0?void 0:e.map(function(f){return f.chartData}))===null||t===void 0?void 0:t.findIndex(function(f){return(f==null?void 0:f[0].data)===a.data&&(f==null?void 0:f[0].legend)===a.legend}))||0,0);g=((i=a.gradient)===null||i===void 0?void 0:i[0])||S(u,0,(o=this.props.theme)===null||o===void 0?void 0:o.isInverted)[0]}this.setState({isCalloutVisible:!0,hoverValue:r,lineColor:g,legend:a.legend,refSelected:n.refElement,xCalloutValue:a.xAxisCalloutData,yCalloutValue:a.yAxisCalloutData,barCalloutProps:a,callOutAccessibilityData:a.callOutAccessibilityData})}},s.prototype._hoverOff=function(){},s.prototype._getDefaultTextData=function(r){var a=this.props.culture,e=this.props.chartDataMode||"default",t=r.chartData[0],i=t.horizontalBarChartdata.x,o=t.horizontalBarChartdata.y,n=$(r.chartDataAccessibilityData,"text",!1);switch(e){case"default":return l.createElement("div",H({className:this._classNames.chartTitleRight},n),U(i,a));case"fraction":return l.createElement("div",H({},n),l.createElement("span",{className:this._classNames.chartTitleRight},U(i,a)),l.createElement("span",{className:this._classNames.chartDataTextDenominator}," / "+U(o,a)));case"percentage":var g="".concat(U(Math.round(i/o*100),a),"%");return l.createElement("div",H({className:this._classNames.chartTitleRight},n),g)}},s.prototype._createBenchmark=function(r){var a=r.chartData[0].horizontalBarChartdata.y,e=r.chartData[0].data,t=Math.round((e||0)/a*100),i={left:"calc("+t+"% - 4px)"};return l.createElement("div",{className:this._classNames.benchmarkContainer},l.createElement("div",{className:this._classNames.triangle,style:i}))},s.prototype._createBars=function(r,a,e){var t=this,i,o=((i=r.chartData)===null||i===void 0?void 0:i.reduce(function(v,h){return v+=(h.data||0)>0?1:0},0))||1,n=this.state.barSpacingInPercent*(o-1),g=[a.blueLight,a.blue,a.blueMid,a.red,a.black],u=[],f=r.chartData.reduce(function(v,h){return v+(h.horizontalBarChartdata.x?h.horizontalBarChartdata.x:0)},0),p=0,_=0,y=0;r.chartData.map(function(v,h){var x=v.horizontalBarChartdata.x?v.horizontalBarChartdata.x:0;return _=x/f*100,_<0?_=0:_<1&&_!==0&&(_=1),y+=_,y});var B=y!==0?(y-n)/100:1,c=r.chartData.map(function(v,h){var x,b,T,C,A=v.color?v.color:g[Math.floor(Math.random()*4+1)],E=A;t.props.enableGradient&&h!==1&&(A=((x=v.gradient)===null||x===void 0?void 0:x[0])||S(e,0,(b=t.props.theme)===null||b===void 0?void 0:b.isInverted)[0],E=((T=v.gradient)===null||T===void 0?void 0:T[1])||S(e,0,(C=t.props.theme)===null||C===void 0?void 0:C.isInverted)[1]);var D=v.horizontalBarChartdata.x?v.horizontalBarChartdata.x:0;h>0&&(p+=_),_=D/f*100,_<0?_=0:_<1&&_!==0?_=1/B:_=_/B,u.push(p);var m=v.horizontalBarChartdata.x,P=1;if(h===P&&t.props.variant===W.AbsoluteScale){if(t.props.hideLabels)return l.createElement("text",{key:h});var V=r.chartData[0].horizontalBarChartdata.x;return l.createElement("text",{key:h,x:"".concat(t._isRTL?100-u[h]:u[h],"%"),y:t._barHeight/2,dominantBaseline:"central",transform:"translate(".concat(t._isRTL?-4:4,")"),className:t._classNames.barLabel,"aria-hidden":!0},be(V))}var N=M("HBC_Gradient")+"_".concat(e,"_").concat(h);return l.createElement(l.Fragment,{key:h},t.props.enableGradient&&l.createElement("defs",null,l.createElement("linearGradient",{id:N},l.createElement("stop",{offset:"0",stopColor:A}),l.createElement("stop",{offset:"100%",stopColor:E}))),l.createElement("rect",{key:h,x:"".concat(t._isRTL?100-u[h]-_-h*t.state.barSpacingInPercent:u[h]+h*t.state.barSpacingInPercent,"%"),y:0,rx:t.props.roundCorners?3:0,"data-is-focusable":v.legend!=="",width:_+"%",height:t._barHeight,fill:t.props.enableGradient?"url(#".concat(N,")"):A,onMouseOver:v.legend!==""?t._hoverOn.bind(t,m,v):void 0,onFocus:v.legend!==""?t._hoverOn.bind(t,m,v):void 0,role:"img","aria-label":t._getAriaLabel(v),onBlur:t._hoverOff,onMouseLeave:t._hoverOff,className:t._classNames.barWrapper}))});return c},s.prototype._isChartEmpty=function(){return!(this.props.data&&this.props.data.length>0)},s})(l.Component),W;(function(d){d.PartToWhole="part-to-whole",d.AbsoluteScale="absolute-scale"})(W||(W={}));var ft=function(d){var s,r=d.className,a=d.theme,e=d.width,t=d.barHeight,i=d.showTriangle,o=d.variant,n=d.hideLabels,g=a.palette;return{root:[{display:"flex",flexDirection:"column",width:e||"100%"},r],items:{marginBottom:i||o===W.AbsoluteScale?"16px":"10px"},chart:{width:"100%",height:t||12,display:"block",overflow:"visible"},barWrapper:{},chartTitle:H(H({},a.fonts.small),{display:"flex",justifyContent:"space-between"}),chartTitleLeft:{textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",display:"block",color:a.palette.neutralPrimary,marginBottom:o===W.AbsoluteScale?"4px":"5px"},chartTitleRight:{fontSize:ge.medium,fontWeight:pe.semibold,color:a.palette.neutralPrimary},chartDataTextDenominator:{fontSize:ge.medium,color:a.palette.neutralPrimary},benchmarkContainer:{position:"relative",height:"7px",marginTop:"-3px",marginBottom:"-1px"},triangle:{width:"0",height:"0",borderLeft:"4px solid transparent",borderRight:"4px solid transparent",borderTop:"7px solid",borderTopColor:g.blue,marginBottom:"4px",position:"absolute"},barLabel:H(H({},a.fonts.small),{fontWeight:pe.semibold,fill:a.palette.neutralPrimary,selectors:(s={},s[we]={fill:"CanvasText"},s)}),chartWrapper:{paddingRight:o===W.AbsoluteScale&&!n?40:0}}},mt=de(_t,ft),R;(function(d){d.show="visibility",d.hide="hidden"})(R||(R={}));var Z=ce(),q=8,yt=(function(d){J(s,d);function s(r){var a,e=d.call(this,r)||this;return e._isRtl=Te(),e.toImage=function(t){var i,o;return Xe([{container:(i=e._cartesianChartRef.current)===null||i===void 0?void 0:i.chartContainer}],e.props.hideLegend||(o=e._legendsRef.current)===null||o===void 0?void 0:o.toSVG,e._isRtl,t)},e._getDomainNRangeValues=function(t,i,o,n,g,u,f,p){var _;return u===I.NumericAxis?_=Ge(t,i,o,g):u===I.DateAxis?_=Ye(t,i,o,g,p,n):_=qe(i,o,g),_},e._createLine=function(t,i,o,n,g){var u;o===void 0&&(o=0),n===void 0&&(n=0);var f=e._xAxisType===I.StringAxis,p=e._getScales(o,n).xBarScale,_=e._createColors(),y=e.props.theme,B=e.props,c=B.data,v=B.lineLegendColor,h=v===void 0?y.palette.yellow:v,x=B.lineLegendText,b=[],T=[];c&&c.forEach(function(m,P){var V;m.lineData&&m.lineData.y&&b.push({x:m.x,y:m.lineData.y,useSecondaryYScale:(V=m.lineData.useSecondaryYScale)!==null&&V!==void 0?V:!1,point:m,index:P})});var C=rt().x(function(m){return f?p(m.x)+.5*p.bandwidth():t(m.x)}).y(function(m){return m.useSecondaryYScale&&g?g(m.y):i(m.y)}),A=!!(e._legendHighlighted(x)||e._noLegendHighlighted()),E=!((u=e.props.lineOptions)===null||u===void 0)&&u.lineBorderWidth?Number.parseFloat(e.props.lineOptions.lineBorderWidth.toString()):0;E>0&&T.push(l.createElement("path",{key:M("_VBC_line_"),id:M("_VBC_line_"),opacity:A?1:.1,d:C(b),fill:"transparent",strokeLinecap:"square",strokeWidth:3+E*2,stroke:y.semanticColors.bodyBackground})),T.push(l.createElement("path",{key:M("_VBC_line_"),id:M("_VBC_line_"),opacity:A?1:.1,d:C(b),fill:"transparent",strokeLinecap:"square",strokeWidth:3,stroke:h}));var D=b.map(function(m,P){var V,N={refElement:null};return l.createElement("circle",{key:P,id:M("_VBC_point_"),cx:f?p(m.x)+.5*p.bandwidth():t(m.x),cy:m.useSecondaryYScale&&g?g(m.y):i(m.y),onMouseOver:e._legendHighlighted(x)?e._lineHover.bind(e,m.point):e._onBarHover.bind(e,m.point,_(m.y)),onMouseOut:e._onBarLeave,r:e._getCircleVisibilityAndRadius(m.x,x).radius,stroke:h,fill:e.props.theme.semanticColors.bodyBackground,strokeWidth:3,visibility:e._getCircleVisibilityAndRadius(m.x,x).visibility,onClick:(V=m.point.lineData)===null||V===void 0?void 0:V.onClick,"data-is-focusable":e._legendHighlighted(x),ref:function(O){N.refElement=O},onFocus:e._lineFocus.bind(e,m.point,N),onBlur:e._handleChartMouseLeave})});return l.createElement(l.Fragment,null,T,D)},e._getCircleVisibilityAndRadius=function(t,i){var o=e.state.activeXdataPoint;return e._noLegendHighlighted()?{visibility:o===t?R.show:R.hide,radius:8}:t===o&&e._legendHighlighted(i)?{visibility:R.show,radius:8}:e._legendHighlighted(i)?{visibility:R.show,radius:.3}:{visibility:R.hide,radius:0}},e._checkForLine=function(){var t=e.props.data;return t.some(function(i){var o;return((o=i==null?void 0:i.lineData)===null||o===void 0?void 0:o.y)!==void 0})},e._getMargins=function(t){e.margins=t},e._renderContentForBothLineAndBars=function(t){var i=e._getCalloutContentForLineAndBar(t),o=i.YValueHover,n=i.hoverXValue,g=o.map(function(u,f){return l.createElement(se,H({key:f,Legend:u.legend},f===0&&{XValue:"".concat(n||u.data)},{color:u.color,YValue:u.data||u.y,culture:e.props.culture}))});return l.createElement(l.Fragment,null,g)},e._renderContentForOnlyBars=function(t){var i=e.props.useSingleColor,o=i===void 0?!1:i;return l.createElement(l.Fragment,null,l.createElement(se,{XValue:t.xAxisCalloutData||t.x,Legend:t.legend,YValue:t.yAxisCalloutData||t.y,color:!o&&t.color?t.color:e._createColors()(t.y),culture:e.props.culture}))},e._renderCallout=function(t){return t?e._isHavingLine?e._renderContentForBothLineAndBars(t):e._renderContentForOnlyBars(t):null},e._getCustomizedCallout=function(){return e.props.onRenderCalloutPerDataPoint?e.props.onRenderCalloutPerDataPoint(e.state.dataPointCalloutProps,e._renderCallout):null},e._getGraphData=function(t,i,o,n,g){return e._bars=e._xAxisType===I.NumericAxis?e._createNumericBars(o,n,g):e._xAxisType===I.DateAxis?e._createDateBars(o,n,g):e._createStringBars(o,n,g)},e._refCallback=function(t,i){e._refArray.push({index:i,refElement:t})},e._getCalloutContentForLineAndBar=function(t){var i,o,n,g,u,f=[],p=e.props,_=p.theme,y=p.useSingleColor,B=y===void 0?!1:y,c=p.enableGradient,v=e.props,h=v.data,x=v.lineLegendText,b=v.lineLegendColor,T=b===void 0?_.palette.yellow:b,C=h.filter(function(m){return m.x===t.x}),A=h.indexOf(C[0]),E=B?e._createColors()(1):C[0].color?C[0].color:e._createColors()(C[0].y);e._isHavingLine&&((i=C[0].lineData)===null||i===void 0?void 0:i.y)!==void 0&&(e._legendHighlighted(x)||e._noLegendHighlighted())&&f.push({legend:x,color:T,y:(o=C[0].lineData)===null||o===void 0?void 0:o.y,data:(n=C[0].lineData)===null||n===void 0?void 0:n.yAxisCalloutData,yAxisCalloutData:(g=C[0].lineData)===null||g===void 0?void 0:g.yAxisCalloutData}),(e._legendHighlighted(C[0].legend)||e._noLegendHighlighted())&&f.push({legend:C[0].legend,y:C[0].y,color:c?B?S(0,0)[0]:((u=C[0].gradient)===null||u===void 0?void 0:u[0])||S(A,0)[0]:E,data:C[0].yAxisCalloutData,yAxisCalloutData:C[0].yAxisCalloutData});var D=t.x instanceof Date?Y(t.x,e.props.culture,e.props.useUTC):t.x.toString();return{YValueHover:f,hoverXValue:t.xAxisCalloutData||D}},e._onBarLeave=function(){},e._handleChartMouseLeave=function(){e._calloutAnchorPoint=null,e.setState({isCalloutVisible:!1,activeXdataPoint:null,YValueHover:[],hoverXValue:""})},e._onBarFocus=function(t,i,o){var n=e._getCalloutContentForLineAndBar(t),g=n.YValueHover,u=n.hoverXValue;e._refArray.forEach(function(f,p){f.index===t.legend&&i===p&&e.setState({refSelected:f.refElement,isCalloutVisible:e._noLegendHighlighted()||e._legendHighlighted(t.legend),calloutLegend:t.legend,dataForHoverCard:t.y,color:t.color||o,xCalloutValue:t.xAxisCalloutData||(t.x instanceof Date?Y(t.x,e.props.culture,e.props.useUTC):t.x.toString()),yCalloutValue:t.yAxisCalloutData,dataPointCalloutProps:t,activeXdataPoint:t.x,YValueHover:g,hoverXValue:u,callOutAccessibilityData:t.callOutAccessibilityData})})},e._lineHover=function(t,i){i.persist(),e._lineHoverFocus(t,i)},e._lineFocus=function(t,i){i.refElement&&e._lineHoverFocus(t,i.refElement)},e._lineHoverFocus=function(t,i){var o=e.props.theme,n=e.props,g=n.lineLegendText,u=g===void 0?"":g,f=n.lineLegendColor,p=f===void 0?o.palette.yellow:f;e.setState({refSelected:i,isCalloutVisible:!0,calloutLegend:u,dataForHoverCard:t.lineData.y,color:p,xCalloutValue:t.xAxisCalloutData||(t.x instanceof Date?Y(t.x,e.props.culture,e.props.useUTC):t.x.toString()),yCalloutValue:t.lineData.yAxisCalloutData,dataPointCalloutProps:t,activeXdataPoint:t.x})},e._getScales=function(t,i){var o,n=re().domain([e.props.supportNegativeData?e._yMin:0,e._yMax]).range([0,t-e.margins.bottom-e.margins.top]);if(e._xAxisType===I.NumericAxis){var g=ee(e._points,function(_){return _.x}),u=te(e._points,function(_){return _.x});o=re().domain(e._isRtl?[g,u]:[u,g]).range([e.margins.left+e._domainMargin,i-e.margins.right-e._domainMargin]),!ae(e.props.xAxisInnerPadding,e.props.xAxisPadding)&&e.props.mode!=="histogram"&&o.nice()}else if(e._xAxisType===I.DateAxis){var f=te(e._points,function(_){return _.x}),p=ee(e._points,function(_){return _.x});o=e.props.useUTC?je():Ue(),o.domain([f,p]).range(e._isRtl?[i-e.margins.right-e._domainMargin,e.margins.left+e._domainMargin]:[e.margins.left+e._domainMargin,i-e.margins.right-e._domainMargin])}else o=Ke().domain(e._xAxisLabels).range(e._isRtl?[i-e.margins.right-e._domainMargin,e.margins.left+e._domainMargin]:[e.margins.left+e._domainMargin,i-e.margins.right-e._domainMargin]).paddingInner(e._xAxisInnerPadding).paddingOuter(e._xAxisOuterPadding);return{xBarScale:o,yBarScale:n}},e._closeCallout=function(){e.setState({isCalloutVisible:!1})},e._getLegendData=function(t,i){var o=e.props,n=o.theme,g=o.useSingleColor,u=e.props,f=u.lineLegendText,p=u.lineLegendColor,_=p===void 0?n.palette.yellow:p,y=[],B={};if(t.forEach(function(h,x){var b,T,C,A=g?e._createColors()(1):h.color;if(e.props.enableGradient){var E=Math.max(((b=e.props.data)===null||b===void 0?void 0:b.findIndex(function(D){return D.legend===h.legend}))||0,0);A=((T=h.gradient)===null||T===void 0?void 0:T[0])||S(E,0,n==null?void 0:n.isInverted)[0],g&&(A=S(0,0,(C=e.props.theme)===null||C===void 0?void 0:C.isInverted)[0])}B[h.legend]=A}),Object.entries(B).forEach(function(h){var x=h[0],b=h[1],T={title:x,color:b,hoverAction:function(){e._handleChartMouseLeave(),e._onLegendHover(x)},onMouseOutAction:function(){e._onLegendLeave()}};y.push(T)}),e._isHavingLine&&f&&_){var c={title:f,color:_,hoverAction:function(){e._handleChartMouseLeave(),e._onLegendHover(f)},onMouseOutAction:function(){e._onLegendLeave()},isLineLegendInBarChart:!0};y.unshift(c)}var v=l.createElement(Ze,H({legends:y,enabledWrapLines:e.props.enabledLegendsWrapLines,overflowProps:e.props.legendsOverflowProps,focusZonePropsInHoverCard:e.props.focusZonePropsForLegendsInHoverCard,overflowText:e.props.legendsOverflowText},e.props.legendProps,{onChange:e._onLegendSelectionChange.bind(e),ref:e._legendsRef}));return v},e._getAxisData=function(t){if(t&&t.yAxisDomainValues.length){var i=t.yAxisDomainValues;e._yMax=Math.max(i[i.length-1],e.props.yMaxValue||0),e._yMin=Math.min(i[0],e.props.yMinValue||0)}},e._legendHighlighted=function(t){return e._getHighlightedLegend().includes(t)},e._noLegendHighlighted=function(){return e._getHighlightedLegend().length===0},e._getAriaLabel=function(t){var i,o,n,g=t.xAxisCalloutData?t.xAxisCalloutData:t.x instanceof Date?Y(t.x,e.props.culture,e.props.useUTC):t.x,u=t.legend,f=t.yAxisCalloutData||t.y,p=e.props.lineLegendText||"Line",_=((i=t.lineData)===null||i===void 0?void 0:i.yAxisCalloutData)||((o=t.lineData)===null||o===void 0?void 0:o.y);return((n=t.callOutAccessibilityData)===null||n===void 0?void 0:n.ariaLabel)||"".concat(g,". ")+(u?"".concat(u,", "):"")+"".concat(f,".")+(typeof _<"u"?" ".concat(p,", ").concat(_,"."):"")},e._getDomainMargins=function(t){var i;e._domainMargin=q;var o={};(i=e.props.data)===null||i===void 0||i.forEach(function(c){c.x instanceof Date?o[c.x.getTime()]=c.x:o[c.x]=c.x});var n=Object.values(o),g=_e(t,e.margins,q);if(e._xAxisType===I.StringAxis){if(ae(e.props.xAxisOuterPadding,e.props.xAxisPadding))e._domainMargin=0;else if(e.props.barWidth!=="auto"&&e.props.mode!=="histogram"){e._barWidth=G(e.props.barWidth,e.props.maxBarWidth);var u=le(e._barWidth,n.length,e._xAxisInnerPadding);g>=u&&(e._domainMargin=q+(g-u)/2)}else if(["plotly","histogram"].includes(e.props.mode)&&n.length>1){var f=pt(g,n.length,e._xAxisInnerPadding),p=G(e.props.barWidth,e.props.maxBarWidth,f,e.props.mode),u=le(p,n.length,e._xAxisInnerPadding),_=(g-u)/2,y=Number.POSITIVE_INFINITY;if(e.props.mode!=="histogram"){var B=$e(n)+20;u=(n.length-e._xAxisInnerPadding)*B,y=(g-u)/2}e._domainMargin=q+Math.max(0,Math.min(_,y))}}else{if(e.props.mode==="histogram"){var p=e.props.maxBarWidth,u=le(p,n.length,e._xAxisInnerPadding);e._domainMargin+=Math.max(0,(g-u)/2)}e._barWidth=G(e.props.barWidth,e.props.maxBarWidth,gt(n,_e(t,e.margins,e._domainMargin),e._xAxisInnerPadding),e.props.mode),e._domainMargin+=e._barWidth/2}return H(H({},e.margins),{left:e.margins.left+e._domainMargin,right:e.margins.right+e._domainMargin})},e._getChartTitle=function(){var t=e.props,i=t.chartTitle,o=t.data;return(i?"".concat(i,". "):"")+"Vertical bar chart with ".concat((o==null?void 0:o.length)||0," bars")+(e._isHavingLine?" and 1 line":"")+". "},e._getOrderedXAxisLabels=function(){return e._xAxisType!==I.StringAxis?[]:Je(e._mapCategoryToValues(),e.props.xAxisCategoryOrder)},e._mapCategoryToValues=function(){var t={};return e._points.forEach(function(i){var o=i.x;t[o]||(t[o]=[]),t[o].push(i.y),i.lineData&&t[o].push(i.lineData.y)}),t},ye(e),e.state={color:"",dataForHoverCard:0,isCalloutVisible:!1,refSelected:null,selectedLegends:((a=r.legendProps)===null||a===void 0?void 0:a.selectedLegends)||[],activeLegend:void 0,xCalloutValue:"",yCalloutValue:"",activeXdataPoint:null,YValueHover:[],hoverXValue:"",calloutLegend:""},e._isHavingLine=e._checkForLine(),e._calloutId=M("callout"),e._tooltipId=M("VCTooltipID_"),e._refArray=[],e._emptyChartId=M("_VBC_empty"),e._domainMargin=q,e._cartesianChartRef=l.createRef(),e._legendsRef=l.createRef(),e}return s.prototype.componentDidUpdate=function(r){var a,e,t;ke((a=r.legendProps)===null||a===void 0?void 0:a.selectedLegends,(e=this.props.legendProps)===null||e===void 0?void 0:e.selectedLegends)||this.setState({selectedLegends:((t=this.props.legendProps)===null||t===void 0?void 0:t.selectedLegends)||[]})},s.prototype.render=function(){var r=this;this._adjustProps(),this._xAxisLabels=this._getOrderedXAxisLabels(),this._yMax=Math.max(ee(this._points,function(i){return i.y}),this.props.yMaxValue||0),this._yMin=Math.min(te(this._points,function(i){return i.y}),this.props.yMinValue||0);var a=this._getLegendData(this._points,this.props.theme.palette);this._classNames=Z(this.props.styles,{theme:this.props.theme,legendColor:this.state.color});var e=H(H(H(H({isCalloutVisible:this.state.isCalloutVisible,directionalHint:Ce.topAutoEdge,id:"toolTip".concat(this._calloutId),target:this.state.refSelected,isBeakVisible:!1},this._isHavingLine&&{YValueHover:this.state.YValueHover,hoverXValue:this.state.hoverXValue}),{gapSpace:15,color:this.state.color,legend:this.state.calloutLegend,XValue:this.state.xCalloutValue,YValue:this.state.yCalloutValue?this.state.yCalloutValue:this.state.dataForHoverCard,onDismiss:this._closeCallout,preventDismissOnLostFocus:!0}),this.props.calloutProps),$(this.state.callOutAccessibilityData)),t={tickValues:this.props.tickValues,tickFormat:this.props.tickFormat};return this._isChartEmpty()?l.createElement("div",{id:this._emptyChartId,role:"alert",style:{opacity:"0"},"aria-label":"Graph has no data to display"}):l.createElement(at,H({},this.props,{chartTitle:this._getChartTitle(),points:this._points,supportNegativeData:this.props.supportNegativeData,chartType:Fe.VerticalBarChart,xAxisType:this._xAxisType,createYAxis:Oe,calloutProps:e,tickParams:t},this._isHavingLine&&(this._noLegendHighlighted()||this._getHighlightedLegend().length>1)&&{isCalloutForStack:!0},{legendBars:a,datasetForXAxisDomain:this._xAxisLabels,barwidth:this._barWidth,focusZoneDirection:ne.horizontal,customizedCallout:this._getCustomizedCallout(),createStringYAxis:We,getmargins:this._getMargins,getMinMaxOfYAxis:Re,getGraphData:this._getGraphData,getDomainNRangeValues:this._getDomainNRangeValues,getAxisData:this._getAxisData,onChartMouseLeave:this._handleChartMouseLeave,getDomainMargins:this._getDomainMargins},this._xAxisType===I.StringAxis&&{xAxisInnerPadding:this._xAxisInnerPadding,xAxisOuterPadding:this._xAxisOuterPadding},{ref:this._cartesianChartRef,showRoundOffXTickValues:!ae(this.props.xAxisInnerPadding,this.props.xAxisPadding)&&this.props.mode!=="histogram",children:function(i){return l.createElement(l.Fragment,null,l.createElement("g",null,r._bars),r._isHavingLine&&l.createElement("g",null,r._createLine(i.xScale,i.yScalePrimary,i.containerHeight,i.containerWidth,i.yScaleSecondary)))}}))},Object.defineProperty(s.prototype,"chartContainer",{get:function(){var r;return((r=this._cartesianChartRef.current)===null||r===void 0?void 0:r.chartContainer)||null},enumerable:!1,configurable:!0}),s.prototype._adjustProps=function(){this._xAxisType=this.props.data&&this.props.data.length>0?ze(this.props.data[0].x):I.StringAxis,this._points=this.props.data||[],this._barWidth=G(this.props.barWidth,this.props.maxBarWidth,void 0,this.props.mode);var r=this.props.theme.palette;this._colors=this.props.colors||[r.blueLight,r.blue,r.blueMid,r.blueDark],this._isHavingLine=this._checkForLine(),this._xAxisInnerPadding=this.props.mode==="histogram"?0:ve(this.props.xAxisInnerPadding,this.props.xAxisPadding,this._xAxisType===I.StringAxis?2/3:1/2),this._xAxisOuterPadding=ve(this.props.xAxisOuterPadding,this.props.xAxisPadding,0)},s.prototype._createColors=function(){var r=this,a=this._colors.length<=1?1:1/(this._colors.length-1),e=this.props.useSingleColor,t=e===void 0?!1:e;if(t)return function(g){var u=r.props,f=u.theme,p=u.colors;return p&&p.length>0?p[0]:f.palette.blueLight};for(var i=[],o=0;o<this._colors.length;o++)i.push(a*o*this._yMax);var n=re().domain(i).range(this._colors);return n},s.prototype._onBarHover=function(r,a,e){e.persist();var t=this._getCalloutContentForLineAndBar(r),i=t.YValueHover,o=t.hoverXValue;this._calloutAnchorPoint!==r&&(this._calloutAnchorPoint=r,this.setState({refSelected:e,isCalloutVisible:this._noLegendHighlighted()||this._legendHighlighted(r.legend),dataForHoverCard:r.y,calloutLegend:r.legend,color:r.color||a,xCalloutValue:r.xAxisCalloutData||(r.x instanceof Date?Y(r.x,this.props.culture,this.props.useUTC):r.x.toString()),yCalloutValue:r.yAxisCalloutData,dataPointCalloutProps:r,activeXdataPoint:this._noLegendHighlighted()||this._legendHighlighted(r.legend)?r.x:null,YValueHover:i,hoverXValue:o,callOutAccessibilityData:r.callOutAccessibilityData}))},s.prototype._calculateMinBarHeight=function(r,a,e,t){var i=a<0?Math.abs(r-e):Math.max(Math.abs(a-e),Math.abs(r-e));return Math.ceil(t(i)/100)},s.prototype._createNumericBars=function(r,a,e){var t=this,i=this.props.useSingleColor,o=i===void 0?!1:i,n=this._getScales(r,a),g=n.xBarScale,u=n.yBarScale,f=this._createColors(),p=this._yMax<0?this._yMax:0,_=this._points.map(function(c,v){var h,x,b,T,C,A,E=!!(t._legendHighlighted(c.legend)||t._noLegendHighlighted());t._classNames=Z(t.props.styles,{theme:t.props.theme,legendColor:t.state.color,shouldHighlight:E});var D=u(c.y)-u(p),m=D<0;D=Math.abs(D);var P=t._calculateMinBarHeight(t._yMin,t._yMax,p,u),V=D;if(D===0||m&&!t.props.supportNegativeData)return l.createElement(l.Fragment,{key:c.x}," ");D<=P&&(V=P);var N=g(c.x)-t._barWidth/2,O=r-t.margins.bottom-(m?-1*V:V)-u(p),z=r-t.margins.bottom-u(p),L=c.color&&!o?c.color:f(c.y),w=L;t.props.enableGradient&&(L=((h=c.gradient)===null||h===void 0?void 0:h[0])||S(v,0,(x=t.props.theme)===null||x===void 0?void 0:x.isInverted)[0],w=((b=c.gradient)===null||b===void 0?void 0:b[1])||S(v,0,(T=t.props.theme)===null||T===void 0?void 0:T.isInverted)[1],o&&(L=S(0,0,(C=t.props.theme)===null||C===void 0?void 0:C.isInverted)[0],w=S(0,0,(A=t.props.theme)===null||A===void 0?void 0:A.isInverted)[1]),t._points[v].color=L);var F=M("VBC_Gradient")+"_".concat(v,"_").concat(L);return l.createElement("g",{key:"".concat(c.x,"_").concat(v)},t.props.enableGradient&&l.createElement("defs",null,l.createElement("linearGradient",{id:F,x1:"0%",y1:"100%",x2:"0%",y2:"0%"},l.createElement("stop",{offset:"0",stopColor:L}),l.createElement("stop",{offset:"100%",stopColor:w}))),l.createElement("rect",{id:M("_VBC_bar_"),x:N,className:t._classNames.opacityChangeOnHover,y:m?z:O,width:t._barWidth,"data-is-focusable":!t.props.hideTooltip&&E,height:V,ref:function(X){t._refCallback(X,c.legend)},onClick:c.onClick,onMouseOver:t._onBarHover.bind(t,c,L),"aria-label":t._getAriaLabel(c),role:"img",onMouseLeave:t._onBarLeave,onFocus:t._onBarFocus.bind(t,c,v,L),onBlur:t._onBarLeave,fill:t.props.enableGradient?"url(#".concat(F,")"):L,rx:t.props.roundCorners?3:0}),t._renderBarLabel(N,O,c.y,c.legend,m))});if(!this.props.showXAxisLablesTooltip)try{document.getElementById(this._tooltipId)&&document.getElementById(this._tooltipId).remove()}catch{}if(!this.props.wrapXAxisLables&&this.props.showXAxisLablesTooltip){var y=ie(e).call(g);try{document.getElementById(this._tooltipId)&&document.getElementById(this._tooltipId).remove()}catch{}var B={tooltipCls:this._classNames.tooltip,id:this._tooltipId,axis:y};y&&oe(B)}return _},s.prototype._createStringBars=function(r,a,e){var t=this,i=this.props.useSingleColor,o=i===void 0?!1:i,n=this._getScales(r,a),g=n.xBarScale,u=n.yBarScale,f=this._createColors(),p=this._yMax<0?this._yMax:0,_=this._points.map(function(c,v){var h,x,b,T,C,A,E=t._legendHighlighted(c.legend)||t._noLegendHighlighted();t._classNames=Z(t.props.styles,{theme:t.props.theme,shouldHighlight:E});var D=u(c.y)-u(p),m=D<0;D=Math.abs(D);var P=t._calculateMinBarHeight(t._yMin,t._yMax,p,u),V=D;if(D===0||m&&!t.props.supportNegativeData)return l.createElement(l.Fragment,{key:c.x}," ");D<=P&&(V=P);var N=g(c.x),O=r-t.margins.bottom-(m?-1*V:V)-u(p),z=r-t.margins.bottom-u(p);t._barWidth=G(t.props.barWidth,t.props.maxBarWidth,g.bandwidth(),t.props.mode);var L=c.color?c.color:f(c.y),w=L;t.props.enableGradient&&(L=((h=c.gradient)===null||h===void 0?void 0:h[0])||S(v,0,(x=t.props.theme)===null||x===void 0?void 0:x.isInverted)[0],w=((b=c.gradient)===null||b===void 0?void 0:b[1])||S(v,0,(T=t.props.theme)===null||T===void 0?void 0:T.isInverted)[1],o&&(L=S(0,0,(C=t.props.theme)===null||C===void 0?void 0:C.isInverted)[0],w=S(0,0,(A=t.props.theme)===null||A===void 0?void 0:A.isInverted)[1]),t._points[v].color=L);var F=M("VBC_Gradient")+"_".concat(v,"_").concat(L);return l.createElement("g",{key:c.x instanceof Date?"".concat(c.x.getTime(),"_").concat(v):"".concat(c.x,"_").concat(v),transform:"translate(".concat(.5*(g.bandwidth()-t._barWidth),", 0)")},t.props.enableGradient&&l.createElement("defs",null,l.createElement("linearGradient",{id:F,x1:"0%",y1:"100%",x2:"0%",y2:"0%"},l.createElement("stop",{offset:"0",stopColor:L}),l.createElement("stop",{offset:"100%",stopColor:w}))),l.createElement("rect",{id:M("_VBC_bar_"),x:N,className:t._classNames.opacityChangeOnHover,y:m?z:O,width:t._barWidth,height:V,"aria-label":t._getAriaLabel(c),role:"img",ref:function(X){t._refCallback(X,c.legend)},onClick:c.onClick,onMouseOver:t._onBarHover.bind(t,c,L),onMouseLeave:t._onBarLeave,onBlur:t._onBarLeave,"data-is-focusable":!t.props.hideTooltip&&E,onFocus:t._onBarFocus.bind(t,c,v,L),fill:t.props.enableGradient?"url(#".concat(F,")"):L,rx:t.props.roundCorners?3:0}),t._renderBarLabel(N,O,c.y,c.legend,m))});if(!this.props.showXAxisLablesTooltip)try{document.getElementById(this._tooltipId)&&document.getElementById(this._tooltipId).remove()}catch{}if(!this.props.wrapXAxisLables&&this.props.showXAxisLablesTooltip){var y=ie(e).call(g);try{document.getElementById(this._tooltipId)&&document.getElementById(this._tooltipId).remove()}catch{}var B={tooltipCls:this._classNames.tooltip,id:this._tooltipId,axis:y,showTooltip:this.props.showXAxisLablesTooltip};y&&oe(B)}return _},s.prototype._createDateBars=function(r,a,e){var t=this,i=this.props.useSingleColor,o=i===void 0?!1:i,n=this._getScales(r,a),g=n.xBarScale,u=n.yBarScale,f=this._createColors(),p=this._yMax<0?this._yMax:0,_=this._points.map(function(c,v){var h,x,b,T,C,A,E=!!(t._legendHighlighted(c.legend)||t._noLegendHighlighted());t._classNames=Z(t.props.styles,{theme:t.props.theme,legendColor:t.state.color,shouldHighlight:E});var D=u(c.y)-u(p),m=D<0;D=Math.abs(D);var P=t._calculateMinBarHeight(t._yMin,t._yMax,p,u),V=D;if(D===0||m&&!t.props.supportNegativeData)return l.createElement(l.Fragment,{key:c.x}," ");D<=P&&(V=P);var N=g(c.x)-t._barWidth/2,O=r-t.margins.bottom-(m?-1*V:V)-u(p),z=r-t.margins.bottom-u(p),L=c.color&&!o?c.color:f(c.y),w=L;t.props.enableGradient&&(L=((h=c.gradient)===null||h===void 0?void 0:h[0])||S(v,0,(x=t.props.theme)===null||x===void 0?void 0:x.isInverted)[0],w=((b=c.gradient)===null||b===void 0?void 0:b[1])||S(v,0,(T=t.props.theme)===null||T===void 0?void 0:T.isInverted)[1],o&&(L=S(0,0,(C=t.props.theme)===null||C===void 0?void 0:C.isInverted)[0],w=S(0,0,(A=t.props.theme)===null||A===void 0?void 0:A.isInverted)[1]),t._points[v].color=L);var F=M("VBC_Gradient")+"_".concat(v,"_").concat(L);return l.createElement("g",{key:c.x instanceof Date?"".concat(c.x.getTime(),"_").concat(v):"".concat(c.x,"_").concat(v)},t.props.enableGradient&&l.createElement("defs",null,l.createElement("linearGradient",{id:F,x1:"0%",y1:"100%",x2:"0%",y2:"0%"},l.createElement("stop",{offset:"0",stopColor:L}),l.createElement("stop",{offset:"100%",stopColor:w}))),l.createElement("rect",{id:M("_VBC_bar_"),x:N,className:t._classNames.opacityChangeOnHover,y:m?z:O,width:t._barWidth,"data-is-focusable":!t.props.hideTooltip&&E,height:V,ref:function(X){t._refCallback(X,c.legend)},onClick:c.onClick,onMouseOver:t._onBarHover.bind(t,c,L),"aria-label":t._getAriaLabel(c),role:"img",onMouseLeave:t._onBarLeave,onFocus:t._onBarFocus.bind(t,c,v,L),onBlur:t._onBarLeave,fill:t.props.enableGradient?"url(#".concat(F,")"):L,rx:t.props.roundCorners?3:0}),t._renderBarLabel(N,O,c.y,c.legend,m))});if(!this.props.showXAxisLablesTooltip)try{document.getElementById(this._tooltipId)&&document.getElementById(this._tooltipId).remove()}catch{}if(!this.props.wrapXAxisLables&&this.props.showXAxisLablesTooltip){var y=ie(e).call(g);try{document.getElementById(this._tooltipId)&&document.getElementById(this._tooltipId).remove()}catch{}var B={tooltipCls:this._classNames.tooltip,id:this._tooltipId,axis:y};y&&oe(B)}return _},s.prototype._onLegendHover=function(r){this.setState({activeLegend:r})},s.prototype._onLegendLeave=function(){this.setState({activeLegend:void 0})},s.prototype._onLegendSelectionChange=function(r,a,e){var t,i;!((t=this.props.legendProps)===null||t===void 0)&&t.canSelectMultipleLegends?this.setState({selectedLegends:r}):this.setState({selectedLegends:r.slice(-1)}),!((i=this.props.legendProps)===null||i===void 0)&&i.onChange&&this.props.legendProps.onChange(r,a,e)},s.prototype._getHighlightedLegend=function(){return this.state.selectedLegends.length>0?this.state.selectedLegends:this.state.activeLegend?[this.state.activeLegend]:[]},s.prototype._renderBarLabel=function(r,a,e,t,i){return this.props.hideLabels||this._barWidth<16||!(this._legendHighlighted(t)||this._noLegendHighlighted())?null:l.createElement("text",{x:r+this._barWidth/2,y:i?a+12:a-6,textAnchor:"middle",className:this._classNames.barLabel,"aria-hidden":!0},typeof this.props.yAxisTickFormat=="function"?this.props.yAxisTickFormat(e):be(e))},s.prototype._isChartEmpty=function(){return this._points.length===0||this._points.every(function(r){return r.y===0})&&!this._isHavingLine},s.defaultProps={maxBarWidth:24,useUTC:!0,xAxisCategoryOrder:"default"},s})(l.Component),xt=function(d){var s=d.shouldHighlight,r=d.theme;return{opacityChangeOnHover:{opacity:s?"":"0.1"},xAxisTicks:[],yAxisTicks:[{transform:"scaleX(-1)"}],yAxisDomain:[{transform:"scaleX(-1)"}],tooltip:et(r),barLabel:Qe(r)}},Ct=de(yt,xt);const bt=Be({container:{display:"flex",flexDirection:"column",height:"100%",width:"100%",minHeight:"200px"},title:{marginBottom:"2px",fontWeight:k.fontWeightSemibold,color:k.colorNeutralForeground1},chartWrapper:{flex:1,position:"relative",minHeight:"150px"},placeholder:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%",color:k.colorNeutralForeground3}}),Tt=()=>[k.colorBrandBackground,k.colorPaletteBlueBorderActive,k.colorPaletteTealBorderActive,k.colorPaletteGreenBorderActive,k.colorPaletteYellowBorderActive,k.colorPaletteDarkOrangeBorderActive,k.colorPaletteRedBorderActive,k.colorPalettePurpleBorderActive],me=({data:d,title:s,orientation:r="vertical",showLabels:a=!0,showLegend:e=!1,onDrillInteraction:t,drillField:i,height:o=300,responsive:n=!0})=>{const g=bt(),u=l.useRef(null),[f,p]=l.useState(400);l.useEffect(()=>{if(!n||!u.current)return;const h=new ResizeObserver(x=>{for(const b of x)p(b.contentRect.width)});return h.observe(u.current),()=>h.disconnect()},[n]);const _=h=>{t&&i&&t({field:i,operator:"eq",value:h.fieldValue,label:h.label})};if(!d||d.length===0)return l.createElement("div",{className:g.container},s&&l.createElement(Q,{className:g.title},s),l.createElement("div",{className:g.placeholder},l.createElement(Q,null,"No data available")));const y=Tt(),B=d.map((h,x)=>({x:h.label,y:h.value,color:h.color||y[x%y.length],legend:h.label,xAxisCalloutData:h.label,yAxisCalloutData:h.value.toString(),onClick:()=>_(h)})),c=d.map((h,x)=>({x:h.value,y:h.label,color:h.color||y[x%y.length],legend:h.label,xAxisCalloutData:h.value.toString(),yAxisCalloutData:h.label,onClick:()=>_(h)})),v={chartTitle:s};return l.createElement("div",{className:g.container,ref:u},s&&l.createElement(Q,{className:g.title},s),l.createElement("div",{className:g.chartWrapper},r==="vertical"?l.createElement(Ct,{data:B,width:n?f:void 0,height:o,hideLegend:!e,hideTooltip:!1,barWidth:32,yAxisTickCount:5,...v}):l.createElement(mt,{data:c.map(h=>({chartTitle:String(h.y),chartData:[{legend:h.legend||"",horizontalBarChartdata:{x:h.x,y:0},color:h.color,onClick:h.onClick}]}))})))};try{me.displayName="BarChart",me.__docgenInfo={description:"BarChart - Renders categorical data as vertical or horizontal bars",displayName:"BarChart",props:{data:{defaultValue:null,description:"Data points to display",name:"data",required:!0,type:{name:"IAggregatedDataPoint[]"}},title:{defaultValue:null,description:"Chart title",name:"title",required:!1,type:{name:"string"}},orientation:{defaultValue:{value:"vertical"},description:"Chart orientation",name:"orientation",required:!1,type:{name:"enum",value:[{value:'"vertical"'},{value:'"horizontal"'}]}},showLabels:{defaultValue:{value:"true"},description:"Whether to show data labels on bars",name:"showLabels",required:!1,type:{name:"boolean"}},showLegend:{defaultValue:{value:"false"},description:"Whether to show the legend",name:"showLegend",required:!1,type:{name:"boolean"}},onDrillInteraction:{defaultValue:null,description:"Callback when a bar is clicked for drill-through",name:"onDrillInteraction",required:!1,type:{name:"((interaction: DrillInteraction) => void)"}},drillField:{defaultValue:null,description:"Field name for drill interaction",name:"drillField",required:!1,type:{name:"string"}},height:{defaultValue:{value:"300"},description:"Height of the chart in pixels",name:"height",required:!1,type:{name:"number"}},responsive:{defaultValue:{value:"true"},description:"Whether the chart should be responsive",name:"responsive",required:!1,type:{name:"boolean"}}}}}catch{}export{me as B};
