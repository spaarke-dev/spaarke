import{r as f}from"./index-D4H_InIO.js";import{m as De,T as se,t as k}from"./Text-C0fEdKO1.js";import{w as Ie,a as R,b as Re,F as Ce,d as Ae,H as xe,_ as ce,g as Le,e as we,h as Ee,c as ue,i as X,j as Pe,k as F,l as ke,M as Se,m as Te,n as Ne,o as He,C as Me,D as Ve,p as Fe,L as Be,f as Oe,q as qe,r as Ge,t as We,s as ze}from"./Legends-DUpH8z2n.js";import{g as Q}from"./gradients-B-09CRJk.js";import{g as je,a as Ue}from"./colors-CW2ns9F7.js";import{ChartHoverCard as Ze}from"./ChartHoverCard-ScuzKI_J.js";const pe=Math.abs,I=Math.atan2,O=Math.cos,$e=Math.max,le=Math.min,T=Math.sin,W=Math.sqrt,w=1e-12,z=Math.PI,ee=z/2,J=2*z;function Ye(s){return s>1?0:s<-1?z:Math.acos(s)}function ge(s){return s>=1?ee:s<=-1?-ee:Math.asin(s)}function Ke(s){return s.innerRadius}function Xe(s){return s.outerRadius}function Je(s){return s.startAngle}function Qe(s){return s.endAngle}function et(s){return s&&s.padAngle}function tt(s,l,a,t,e,n,o,r){var u=a-s,c=t-l,i=o-e,g=r-n,d=g*u-i*c;if(!(d*d<w))return d=(i*(l-n)-g*(s-e))/d,[s+d*u,l+d*c]}function K(s,l,a,t,e,n,o){var r=s-a,u=l-t,c=(o?n:-n)/W(r*r+u*u),i=c*u,g=-c*r,d=s+i,h=l+g,m=a+i,y=t+g,L=(d+m)/2,_=(h+y)/2,x=m-d,C=y-h,v=x*x+C*C,A=e-n,D=d*y-m*h,H=(C<0?-1:1)*W($e(0,A*A*v-D*D)),M=(D*C-x*H)/v,V=(-D*x-C*H)/v,S=(D*C+x*H)/v,E=(-D*x+C*H)/v,P=M-L,p=V-_,b=S-L,B=E-_;return P*P+p*p>b*b+B*B&&(M=S,V=E),{cx:M,cy:V,x01:-i,y01:-g,x11:M*(e/A-1),y11:V*(e/A-1)}}function at(){var s=Ke,l=Xe,a=R(0),t=null,e=Je,n=Qe,o=et,r=null,u=Ie(c);function c(){var i,g,d=+s.apply(this,arguments),h=+l.apply(this,arguments),m=e.apply(this,arguments)-ee,y=n.apply(this,arguments)-ee,L=pe(y-m),_=y>m;if(r||(r=i=u()),h<d&&(g=h,h=d,d=g),!(h>w))r.moveTo(0,0);else if(L>J-w)r.moveTo(h*O(m),h*T(m)),r.arc(0,0,h,m,y,!_),d>w&&(r.moveTo(d*O(y),d*T(y)),r.arc(0,0,d,y,m,_));else{var x=m,C=y,v=m,A=y,D=L,H=L,M=o.apply(this,arguments)/2,V=M>w&&(t?+t.apply(this,arguments):W(d*d+h*h)),S=le(pe(h-d)/2,+a.apply(this,arguments)),E=S,P=S,p,b;if(V>w){var B=ge(V/d*T(M)),j=ge(V/h*T(M));(D-=B*2)>w?(B*=_?1:-1,v+=B,A-=B):(D=0,v=A=(m+y)/2),(H-=j*2)>w?(j*=_?1:-1,x+=j,C-=j):(H=0,x=C=(m+y)/2)}var q=h*O(x),G=h*T(x),U=d*O(A),Z=d*T(A);if(S>w){var $=h*O(C),Y=h*T(C),te=d*O(v),ae=d*T(v),N;if(L<z)if(N=tt(q,G,te,ae,$,Y,U,Z)){var ne=q-N[0],re=G-N[1],oe=$-N[0],ie=Y-N[1],de=1/T(Ye((ne*oe+re*ie)/(W(ne*ne+re*re)*W(oe*oe+ie*ie)))/2),he=W(N[0]*N[0]+N[1]*N[1]);E=le(S,(d-he)/(de-1)),P=le(S,(h-he)/(de+1))}else E=P=0}H>w?P>w?(p=K(te,ae,q,G,h,P,_),b=K($,Y,U,Z,h,P,_),r.moveTo(p.cx+p.x01,p.cy+p.y01),P<S?r.arc(p.cx,p.cy,P,I(p.y01,p.x01),I(b.y01,b.x01),!_):(r.arc(p.cx,p.cy,P,I(p.y01,p.x01),I(p.y11,p.x11),!_),r.arc(0,0,h,I(p.cy+p.y11,p.cx+p.x11),I(b.cy+b.y11,b.cx+b.x11),!_),r.arc(b.cx,b.cy,P,I(b.y11,b.x11),I(b.y01,b.x01),!_))):(r.moveTo(q,G),r.arc(0,0,h,x,C,!_)):r.moveTo(q,G),!(d>w)||!(D>w)?r.lineTo(U,Z):E>w?(p=K(U,Z,$,Y,d,-E,_),b=K(q,G,te,ae,d,-E,_),r.lineTo(p.cx+p.x01,p.cy+p.y01),E<S?r.arc(p.cx,p.cy,E,I(p.y01,p.x01),I(b.y01,b.x01),!_):(r.arc(p.cx,p.cy,E,I(p.y01,p.x01),I(p.y11,p.x11),!_),r.arc(0,0,d,I(p.cy+p.y11,p.cx+p.x11),I(b.cy+b.y11,b.cx+b.x11),_),r.arc(b.cx,b.cy,E,I(b.y11,b.x11),I(b.y01,b.x01),!_))):r.arc(0,0,d,A,v,_)}if(r.closePath(),i)return r=null,i+""||null}return c.centroid=function(){var i=(+s.apply(this,arguments)+ +l.apply(this,arguments))/2,g=(+e.apply(this,arguments)+ +n.apply(this,arguments))/2-z/2;return[O(g)*i,T(g)*i]},c.innerRadius=function(i){return arguments.length?(s=typeof i=="function"?i:R(+i),c):s},c.outerRadius=function(i){return arguments.length?(l=typeof i=="function"?i:R(+i),c):l},c.cornerRadius=function(i){return arguments.length?(a=typeof i=="function"?i:R(+i),c):a},c.padRadius=function(i){return arguments.length?(t=i==null?null:typeof i=="function"?i:R(+i),c):t},c.startAngle=function(i){return arguments.length?(e=typeof i=="function"?i:R(+i),c):e},c.endAngle=function(i){return arguments.length?(n=typeof i=="function"?i:R(+i),c):n},c.padAngle=function(i){return arguments.length?(o=typeof i=="function"?i:R(+i),c):o},c.context=function(i){return arguments.length?(r=i??null,c):r},c}function nt(s,l){return l<s?-1:l>s?1:l>=s?0:NaN}function rt(s){return s}function fe(){var s=rt,l=nt,a=null,t=R(0),e=R(J),n=R(0);function o(r){var u,c=(r=Re(r)).length,i,g,d=0,h=new Array(c),m=new Array(c),y=+t.apply(this,arguments),L=Math.min(J,Math.max(-J,e.apply(this,arguments)-y)),_,x=Math.min(Math.abs(L)/c,n.apply(this,arguments)),C=x*(L<0?-1:1),v;for(u=0;u<c;++u)(v=m[h[u]=u]=+s(r[u],u,r))>0&&(d+=v);for(l!=null?h.sort(function(A,D){return l(m[A],m[D])}):a!=null&&h.sort(function(A,D){return a(r[A],r[D])}),u=0,g=d?(L-c*C)/d:0;u<c;++u,y=_)i=h[u],v=m[i],_=y+(v>0?v*g:0)+C,m[i]={data:r[i],index:u,value:v,startAngle:y,endAngle:_,padAngle:x};return m}return o.value=function(r){return arguments.length?(s=typeof r=="function"?r:R(+r),o):s},o.sortValues=function(r){return arguments.length?(l=r,a=null,o):l},o.sort=function(r){return arguments.length?(a=r,l=null,o):a},o.startAngle=function(r){return arguments.length?(t=typeof r=="function"?r:R(+r),o):t},o.endAngle=function(r){return arguments.length?(e=typeof r=="function"?r:R(+r),o):e},o.padAngle=function(r){return arguments.length?(n=typeof r=="function"?r:R(+r),o):n},o}var ot=function(s){var l,a=s.solidFill,t=s.gradientFill,e=s.href,n=s.theme,o=s.opacity;return{root:{fill:a,cursor:e?"pointer":"default",stroke:n.semanticColors.bodyBackground,outline:"transparent",selectors:{"::-moz-focus-inner":{border:"0"}},opacity:o},gradientArc:{width:"100%",height:"100%",background:t,opacity:o},focusRing:{stroke:n.semanticColors.focusBorder,strokeWidth:4,fill:"transparent"},arcLabel:{fontSize:Ae.small,fontWeight:Ce.semibold,fill:n.palette.neutralPrimary,selectors:(l={},l[xe]={fill:"CanvasText"},l)}}},it=(function(s){ce(l,s);function l(){var a=s!==null&&s.apply(this,arguments)||this;return a.state={},a.currentRef=f.createRef(),a._isRTL=Le(),a._hoverOff=function(){a.props.hoverLeaveCallback()},a._onBlur=function(){a.props.onBlurCallback()},a._getAriaLabel=function(){var t,e=a.props.data.data,n=e.xAxisCalloutData||e.legend,o=e.yAxisCalloutData||e.data||0;return((t=e.callOutAccessibilityData)===null||t===void 0?void 0:t.ariaLabel)||(n?"".concat(n,", "):"")+"".concat(o,".")},a._shouldHighlightArc=function(t){var e=a.props.activeArc;return!e||e.length===0||t===void 0||e.includes(t)},a._renderArcLabel=function(t){var e=a.props,n=e.arc,o=e.data,r=e.innerRadius,u=e.outerRadius,c=e.showLabelsInPercent,i=e.totalValue,g=e.hideLabels;if(g||Math.abs(o.endAngle-o.startAngle)<Math.PI/12||!a._shouldHighlightArc(o.data.legend))return null;var d=n.centroid(o),h=d[0],m=d[1],y=Math.sqrt(h*h+m*m),L=Math.max(r,u)+2,_=(o.startAngle+o.endAngle)/2,x=o.value;return f.createElement("text",{x:(y===0?0:h/y)*L,y:(y===0?0:m/y)*L,textAnchor:_>Math.PI!==a._isRTL?"end":"start",dominantBaseline:_>Math.PI/2&&_<3*Math.PI/2?"hanging":"auto",className:t,"aria-hidden":!0},c?we(".0%")(i===0?0:x/i):Ee(x))},a}return l.getDerivedStateFromProps=function(a){return ve(a),null},l.prototype.updateChart=function(a){ve(a)},l.prototype.render=function(){var a,t,e,n,o,r,u,c=this.props,i=c.arc,g=c.href,d=c.focusedArcId,h=c.activeArc,m=ue(),y=this.props.uniqText+(typeof this.props.data.data.legend=="string"?this.props.data.data.legend.replace(/\s+/g,""):"")+this.props.data.data.data,L=h&&h.length>0?h.includes((a=this.props.data)===null||a===void 0?void 0:a.data.legend)?1:.1:1,_=(e=(t=this.props.data)===null||t===void 0?void 0:t.startAngle)!==null&&e!==void 0?e:0,x=((o=(n=this.props.data)===null||n===void 0?void 0:n.endAngle)!==null&&o!==void 0?o:0)-_,C=this.props.roundCorners?3:0,v=m(ot,{solidFill:this.props.enableGradient?"transparent":this.props.color,gradientFill:`conic-gradient(
          from `.concat(_,`rad,
          `).concat(this.props.color,`,
          `).concat(this.props.nextColor," ").concat(x,`rad
        )`),href:g,theme:this.props.theme,opacity:L}),A=X("Arc_clip")+"".concat(this.props.color,"_").concat(this.props.nextColor);return f.createElement("g",{ref:this.currentRef},!!d&&d===y&&f.createElement("path",{id:y+"focusRing",d:i.cornerRadius(C)(this.props.focusData),className:v.focusRing}),f.createElement("path",{id:y,d:i.cornerRadius(C)(this.props.data),onFocus:this._onFocus.bind(this,this.props.data.data,y),className:v.root,"data-is-focusable":this._shouldHighlightArc(this.props.data.data.legend)||((r=this.props.activeArc)===null||r===void 0?void 0:r.length)===0,onMouseOver:this._hoverOn.bind(this,this.props.data.data),onMouseMove:this._hoverOn.bind(this,this.props.data.data),onMouseLeave:this._hoverOff,onBlur:this._onBlur,onClick:g?this._redirectToUrl.bind(this,g):(u=this.props.data)===null||u===void 0?void 0:u.data.onClick,"aria-label":this._getAriaLabel(),role:"img"}),this._renderArcLabel(v.arcLabel),this.props.enableGradient&&f.createElement(f.Fragment,null,f.createElement("clipPath",{id:A},f.createElement("path",{d:i.cornerRadius(C)(this.props.data)})),f.createElement("foreignObject",{x:"-50%",y:"-50%",width:"100%",height:"100%",clipPath:"url(#".concat(A,")")},f.createElement("div",{className:v.gradientArc}))))},l.prototype._onFocus=function(a,t){this.props.onFocusCallback(a,t,this.currentRef.current)},l.prototype._hoverOn=function(a,t){t.persist(),this.props.hoverOnCallback(a,t)},l.prototype._redirectToUrl=function(a){a&&(window.location.href=a)},l.defaultProps={arc:at()},l})(f.Component);function ve(s){s.arc.innerRadius(s.innerRadius),s.arc.outerRadius(s.outerRadius)}var me=function(s){var l,a=s.theme;return{root:{},insideDonutString:{fontSize:Ae.xLargePlus,fontWeight:Ce.semibold,fill:a.semanticColors.bodyText,selectors:(l={},l[xe]={fill:"CanvasText"},l)}}},_e=ue(),st=5,lt=(function(s){ce(l,s);function l(a){var t=s.call(this,a)||this;return t.arcGenerator=function(e,n,o,r){var u,c,i,g,d=e&&e.data&&e.data.color,h=d;return t.props.enableGradient&&(d=(c=(u=t.props.data[n].gradient)===null||u===void 0?void 0:u[0])!==null&&c!==void 0?c:Q(n,0,t.props.theme.isInverted)[0],h=(g=(i=t.props.data[n].gradient)===null||i===void 0?void 0:i[1])!==null&&g!==void 0?g:Q(n,0,t.props.theme.isInverted)[1]),f.createElement(it,{key:n,data:e,focusData:o,innerRadius:t.props.innerRadius,outerRadius:t.props.outerRadius,color:d,nextColor:h,enableGradient:t.props.enableGradient,roundCorners:t.props.roundCorners,onFocusCallback:t._focusCallback,hoverOnCallback:t._hoverCallback,onBlurCallback:t.props.onBlurCallback,hoverLeaveCallback:t.props.hoverLeaveCallback,uniqText:t.props.uniqText,activeArc:t.props.activeArc,href:r,calloutId:t.props.calloutId,valueInsideDonut:t.props.valueInsideDonut,theme:t.props.theme,focusedArcId:t.props.focusedArcId,showLabelsInPercent:t.props.showLabelsInPercent,totalValue:t._totalValue,hideLabels:t.props.hideLabels})},t._focusCallback=function(e,n,o){t.props.onFocusCallback(e,n,o)},t._computeTotalValue=function(){var e=0;return t.props.data.forEach(function(n){e+=n.data}),e},t._hoverCallback=t._hoverCallback.bind(t),t._pieForFocusRing=fe().sort(null).value(function(e){return e.data}).padAngle(0),t}return l.prototype.render=function(){var a=this,t=this.props,e=t.pie,n=t.data,o=this._pieForFocusRing(n),r=e(n),u="translate(".concat(this.props.width/2,", ").concat(this.props.height/2,")"),c=_e(me,{theme:this.props.theme});return this._totalValue=this._computeTotalValue(),f.createElement("g",{transform:u},r.map(function(i,g){return a.arcGenerator(i,g,o[g],a.props.href)}),this.props.valueInsideDonut&&f.createElement("text",{y:5,textAnchor:"middle",dominantBaseline:"middle",className:c.insideDonutString},this.props.valueInsideDonut))},l.prototype.componentDidUpdate=function(){var a=_e(me,{theme:this.props.theme});Pe(a.insideDonutString,this.props.innerRadius*2-st)},l.prototype._hoverCallback=function(a,t){this.props.hoverOnCallback(a,t)},l.defaultProps={pie:fe().sort(null).value(function(a){return a.data}).padAngle(.02)},l})(f.Component),ct=ue(),ye=40,ut=(function(s){ce(l,s);function l(a){var t,e=s.call(this,a)||this;return e.toImage=function(n){var o;return qe([{container:e._rootElem}],e.props.hideLegend||(o=e._legendsRef.current)===null||o===void 0?void 0:o.toSVG,Le(),n)},e._closeCallout=function(){e.setState({showHover:!1})},e._focusCallback=function(n,o,r){e._currentHoverElement=r,e.setState({showHover:e._noLegendsHighlighted()||e._isLegendHighlighted(n.legend),value:n.data.toString(),legend:n.legend,color:n.color,xCalloutValue:n.xAxisCalloutData,yCalloutValue:n.yAxisCalloutData,focusedArcId:o,dataPointCalloutProps:n,callOutAccessibilityData:n.callOutAccessibilityData})},e._hoverCallback=function(n,o){var r,u,c,i;if(e._calloutAnchorPoint!==n){e._calloutAnchorPoint=n,e._currentHoverElement=o;var g=n.color;if(e.props.enableGradient){var d=Math.max(((u=(r=e.props.data)===null||r===void 0?void 0:r.chartData)===null||u===void 0?void 0:u.findIndex(function(h){return h.legend===n.legend}))||0,0);g=((c=n.gradient)===null||c===void 0?void 0:c[0])||Q(d,0,(i=e.props.theme)===null||i===void 0?void 0:i.isInverted)[0]}e.setState({showHover:e._noLegendsHighlighted()||e._isLegendHighlighted(n.legend),value:n.data.toString(),legend:n.legend,color:g,xCalloutValue:n.xAxisCalloutData,yCalloutValue:n.yAxisCalloutData,dataPointCalloutProps:n,callOutAccessibilityData:n.callOutAccessibilityData})}},e._onBlur=function(){e.setState({focusedArcId:""})},e._handleChartMouseLeave=function(){e._calloutAnchorPoint=null,e.setState({showHover:!1})},e._isLegendHighlighted=function(n){return e._getHighlightedLegend().includes(n)},e._noLegendsHighlighted=function(){return e._getHighlightedLegend().length===0},e._addDefaultColors=function(n){return n?n.map(function(o,r){var u,c,i;return typeof o.color>"u"?i=je(r,0,(u=e.props.theme)===null||u===void 0?void 0:u.isInverted):i=Ue(o.color,(c=e.props.theme)===null||c===void 0?void 0:c.isInverted),F(F({},o),{color:i})}):[]},Ge(e),e.state={showHover:!1,value:"",legend:"",_width:e.props.width||200,_height:e.props.height||200,activeLegend:void 0,color:"",xCalloutValue:"",yCalloutValue:"",focusedArcId:"",selectedLegends:((t=a.legendProps)===null||t===void 0?void 0:t.selectedLegends)||[]},e._hoverCallback=e._hoverCallback.bind(e),e._focusCallback=e._focusCallback.bind(e),e._hoverLeave=e._hoverLeave.bind(e),e._calloutId=X("callout"),e._uniqText=X("_Pie_"),e._emptyChartId=X("_DonutChart_empty"),e._legendsRef=f.createRef(),e}return l.getDerivedStateFromProps=function(a,t){var e;a.width&&a.width!==t._width&&(e={_width:a.width});var n;return a.height&&a.height!==t._height&&(n={_height:a.height-ye}),F(F({},e),n)},l.prototype.componentDidMount=function(){this._rootElem&&this.setState({_width:this._rootElem.offsetWidth,_height:this._rootElem.offsetHeight-ye})},l.prototype.componentDidUpdate=function(a){var t,e,n;ke((t=a.legendProps)===null||t===void 0?void 0:t.selectedLegends,(e=this.props.legendProps)===null||e===void 0?void 0:e.selectedLegends)||this.setState({selectedLegends:((n=this.props.legendProps)===null||n===void 0?void 0:n.selectedLegends)||[]})},l.prototype.render=function(){var a=this,t=this.props,e=t.data,n=t.hideLegend,o=n===void 0?!1:n,r=this._addDefaultColors(e==null?void 0:e.chartData);this._classNames=ct(this.props.styles,{theme:this.props.theme,color:this.state.color,className:this.props.className});var u=this._createLegends(r.filter(function(m){return m.data>=0})),c=this.props.hideLabels?0:80,i=this.props.hideLabels?0:40,g=Math.min(this.state._width-c,this.state._height-i)/2,d=this._elevateToMinimums(r),h=this.props.innerRadius>Se?this._valueInsideDonut(this.props.valueInsideDonut,d):"";return this._isChartEmpty()?f.createElement("div",{id:this._emptyChartId,role:"alert",style:{opacity:"0"},"aria-label":"Graph has no data to display"}):f.createElement("div",{className:this._classNames.root,ref:function(m){a._rootElem=m},onMouseLeave:this._handleChartMouseLeave},this.props.xAxisAnnotation&&f.createElement("text",{className:this._classNames.axisAnnotation,x:this.state._width/2,y:this.state._height-10,textAnchor:"middle"},this.props.xAxisAnnotation),f.createElement(Te,{direction:He.horizontal,handleTabKey:Ne.all,className:this._classNames.chartWrapper},f.createElement("svg",{className:this._classNames.chart,"aria-label":e==null?void 0:e.chartTitle,ref:function(m){return a._setViewBox(m)},width:this.state._width,height:this.state._height},f.createElement(lt,{width:this.state._width,height:this.state._height,outerRadius:g,innerRadius:this.props.innerRadius,data:d,enableGradient:this.props.enableGradient,roundCorners:this.props.roundCorners,onFocusCallback:this._focusCallback,hoverOnCallback:this._hoverCallback,hoverLeaveCallback:this._hoverLeave,uniqText:this._uniqText,onBlurCallback:this._onBlur,activeArc:this._getHighlightedLegend(),focusedArcId:this.state.focusedArcId||"",href:this.props.href,calloutId:this._calloutId,valueInsideDonut:this._toLocaleString(h),theme:this.props.theme,showLabelsInPercent:this.props.showLabelsInPercent,hideLabels:this.props.hideLabels}))),f.createElement(Me,F({target:this._currentHoverElement,alignTargetEdge:!0,isBeakVisible:!1,directionalHint:Ve.topAutoEdge,gapSpace:15,hidden:!(!this.props.hideTooltip&&this.state.showHover),id:this._calloutId,onDismiss:this._closeCallout,preventDismissOnLostFocus:!0,shouldUpdateWhenHidden:!0},this.props.calloutProps,Fe(this.state.callOutAccessibilityData,"text",!1)),this.props.onRenderCalloutPerDataPoint?this.props.onRenderCalloutPerDataPoint(this.state.dataPointCalloutProps):f.createElement(Ze,{Legend:this.state.xCalloutValue?this.state.xCalloutValue:this.state.legend,YValue:this.state.yCalloutValue?this.state.yCalloutValue:this.state.value,color:this.state.color,culture:this.props.culture})),!o&&f.createElement("div",{className:this._classNames.legendContainer},u))},Object.defineProperty(l.prototype,"chartContainer",{get:function(){return this._rootElem},enumerable:!1,configurable:!0}),l.prototype._elevateToMinimums=function(a){var t=0,e=.01,n=[];return a.forEach(function(o){t+=o.data}),a.forEach(function(o){n.push(e*t>o.data&&o.data>0?F(F({},o),{data:e*t,yAxisCalloutData:o.yAxisCalloutData===void 0?o.data.toLocaleString():o.yAxisCalloutData}):o)}),n},l.prototype._setViewBox=function(a){var t,e;if(a!==null){var n=a.parentElement?a.parentElement.clientWidth:this.state._width,o=a.parentElement&&((t=a.parentElement)===null||t===void 0?void 0:t.offsetHeight)>this.state._height?(e=a.parentElement)===null||e===void 0?void 0:e.offsetHeight:this.state._height,r="0 0 ".concat(n," ").concat(o);a.setAttribute("viewBox",r)}},l.prototype._createLegends=function(a){var t=this;this.props.order==="sorted"&&a.sort(function(o,r){return r.data-o.data});var e=a.map(function(o,r){var u,c,i=t.props.enableGradient?((u=o.gradient)===null||u===void 0?void 0:u[0])||Q(r,0,(c=t.props.theme)===null||c===void 0?void 0:c.isInverted)[0]:o.color,g={title:o.legend,color:i,hoverAction:function(){t._handleChartMouseLeave(),t.setState({activeLegend:o.legend})},onMouseOutAction:function(){t.setState({activeLegend:void 0})}};return g}),n=f.createElement(Be,F({legends:e,centerLegends:!0,overflowProps:this.props.legendsOverflowProps,focusZonePropsInHoverCard:this.props.focusZonePropsForLegendsInHoverCard,overflowText:this.props.legendsOverflowText},this.props.legendProps,{onChange:this._onLegendSelectionChange.bind(this),ref:this._legendsRef}));return n},l.prototype._onLegendSelectionChange=function(a,t,e){var n,o;this.props.legendProps&&(!((n=this.props.legendProps)===null||n===void 0)&&n.canSelectMultipleLegends)?this.setState({selectedLegends:a}):this.setState({selectedLegends:a.slice(-1)}),!((o=this.props.legendProps)===null||o===void 0)&&o.onChange&&this.props.legendProps.onChange(a,t,e)},l.prototype._hoverLeave=function(){},l.prototype._valueInsideDonut=function(a,t){var e=this,n=this._getHighlightedLegend();if(a!==void 0&&(n.length===1||this.state.showHover)){var o=t.find(function(u){return e._isLegendHighlighted(u.legend)});return o?o.yAxisCalloutData?o.yAxisCalloutData:o.data:a}else if(n.length>0){var r=0;return t.forEach(function(u){n.includes(u.legend)&&(r+=u.data)}),r}else return a},l.prototype._toLocaleString=function(a){var t=Oe(a,this.props.culture,this.props.useUTC);return t?t==null?void 0:t.toString():a},l.prototype._getHighlightedLegend=function(){return this.state.selectedLegends.length>0?this.state.selectedLegends:this.state.activeLegend?[this.state.activeLegend]:[]},l.prototype._isChartEmpty=function(){return!(this.props.data&&this.props.data.chartData&&this.props.data.chartData.filter(function(a){return a.data>0}).length>0)},l.defaultProps={innerRadius:0,hideLabels:!0},l})(f.Component),dt=function(s){var l=s.className,a=s.theme;return{root:[a.fonts.medium,"ms-DonutChart",{alignItems:"center",display:"flex",flexDirection:"column",width:"100%",height:"100%"},l],chart:{boxSizing:"content-box",overflow:"visible",alignmentAdjust:"center",display:"block"},legendContainer:{paddingTop:"16px",width:"100%"},axisAnnotation:We(a,a.fonts.small)}},ht=ze(ut,dt);const pt=De({container:{display:"flex",flexDirection:"column",height:"100%",width:"100%",minHeight:"200px",alignItems:"center"},title:{marginBottom:k.spacingVerticalS,fontWeight:k.fontWeightSemibold,color:k.colorNeutralForeground1,textAlign:"center"},chartWrapper:{flex:1,position:"relative",minHeight:"150px",display:"flex",justifyContent:"center",alignItems:"center"},placeholder:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%",color:k.colorNeutralForeground3}}),gt=()=>[k.colorBrandBackground,k.colorPaletteBlueBorderActive,k.colorPaletteTealBorderActive,k.colorPaletteGreenBorderActive,k.colorPaletteYellowBorderActive,k.colorPaletteDarkOrangeBorderActive,k.colorPaletteRedBorderActive,k.colorPalettePurpleBorderActive],be=({data:s,title:l,innerRadius:a=.5,showLegend:t=!0,onDrillInteraction:e,drillField:n,height:o=300,responsive:r=!0,showCenterValue:u=!0,centerLabel:c})=>{const i=pt(),g=f.useRef(null),[d,h]=f.useState(400);f.useEffect(()=>{if(!r||!g.current)return;const v=new ResizeObserver(A=>{for(const D of A)h(D.contentRect.width)});return v.observe(g.current),()=>v.disconnect()},[r]);const m=v=>{e&&n&&e({field:n,operator:"eq",value:v.fieldValue,label:v.label})};if(!s||s.length===0)return f.createElement("div",{className:i.container},l&&f.createElement(se,{className:i.title},l),f.createElement("div",{className:i.placeholder},f.createElement(se,null,"No data available")));const y=gt(),L=s.reduce((v,A)=>v+A.value,0),_=s.map((v,A)=>({legend:v.label,data:v.value,color:v.color||y[A%y.length],onClick:()=>m(v)})),x={chartTitle:l},C=Math.min(d,o);return f.createElement("div",{className:i.container,ref:g},l&&f.createElement(se,{className:i.title},l),f.createElement("div",{className:i.chartWrapper},f.createElement(ht,{data:{chartData:_},width:C,height:C,hideLegend:!t,hideTooltip:!1,innerRadius:a*(C/2),valueInsideDonut:u?c||L.toLocaleString():void 0,...x})))};try{be.displayName="DonutChart",be.__docgenInfo={description:"DonutChart - Renders proportional data as donut/pie chart",displayName:"DonutChart",props:{data:{defaultValue:null,description:"Data points to display",name:"data",required:!0,type:{name:"IAggregatedDataPoint[]"}},title:{defaultValue:null,description:"Chart title",name:"title",required:!1,type:{name:"string"}},innerRadius:{defaultValue:{value:"0.5"},description:"Inner radius ratio (0-1, 0 = pie chart, 0.5 = typical donut)",name:"innerRadius",required:!1,type:{name:"number"}},showLegend:{defaultValue:{value:"true"},description:"Whether to show the legend",name:"showLegend",required:!1,type:{name:"boolean"}},onDrillInteraction:{defaultValue:null,description:"Callback when a slice is clicked for drill-through",name:"onDrillInteraction",required:!1,type:{name:"((interaction: DrillInteraction) => void)"}},drillField:{defaultValue:null,description:"Field name for drill interaction",name:"drillField",required:!1,type:{name:"string"}},height:{defaultValue:{value:"300"},description:"Height of the chart in pixels",name:"height",required:!1,type:{name:"number"}},responsive:{defaultValue:{value:"true"},description:"Whether the chart should be responsive",name:"responsive",required:!1,type:{name:"boolean"}},showCenterValue:{defaultValue:{value:"true"},description:"Whether to show value in center",name:"showCenterValue",required:!1,type:{name:"boolean"}},centerLabel:{defaultValue:null,description:"Custom center label",name:"centerLabel",required:!1,type:{name:"string"}}}}}catch{}export{be as D};
