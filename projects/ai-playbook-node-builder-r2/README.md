# AI Chat Playbook Builder

> **Status**: Complete
> **Created**: 2026-01-16
> **Completed**: 2026-01-17
> **Estimated Effort**: 6-7 weeks

---

## Overview

The AI Chat Playbook Builder adds conversational AI assistance to the PlaybookBuilderHost PCF control. Users can build playbooks through natural language while seeing results update in real-time on the visual canvas.

This project establishes a **unified AI agent framework** where the Builder itself is a playbook (PB-BUILDER) using the same scope infrastructure it helps users compose.

---

## Key Features

- **Natural Language Playbook Creation** - "Build a lease analysis playbook"
- **Real-Time Canvas Updates** - Streaming SSE updates as operations execute
- **Intelligent Scope Management** - Save As, Extend, Create New with ownership model
- **Test Execution Modes** - Mock, Quick, Production for validation at different stages
- **Tiered AI Model Selection** - Cost optimization with GPT-4o-mini, GPT-4o, o1-mini

---

## Quick Links

| Resource | Path |
|----------|------|
| **Spec** | [spec.md](spec.md) |
| **Plan** | [plan.md](plan.md) |
| **Design** | [ai-chat-playbook-builder.md](ai-chat-playbook-builder.md) |
| **Tasks** | [tasks/TASK-INDEX.md](tasks/TASK-INDEX.md) |
| **Context** | [CLAUDE.md](CLAUDE.md) |

---

## Architecture

```
┌─────────────────────────────────────────────────────────────┐
│                  PlaybookBuilderHost PCF                     │
├─────────────────────────────────────────────────────────────┤
│                                                              │
│  ┌────────────────────────┐  ┌────────────────────────────┐ │
│  │     CANVAS AREA        │  │   AI ASSISTANT MODAL       │ │
│  │                        │  │   (Floating/Resizable)     │ │
│  │  ┌──────┐    ┌──────┐ │  │                            │ │
│  │  │ Node │───▶│ Node │ │  │  Chat History              │ │
│  │  └──────┘    └──────┘ │  │  Chat Input                │ │
│  │                        │  │  Operation Feedback        │ │
│  └────────────────────────┘  └────────────────────────────┘ │
│                                                              │
└─────────────────────────────────────────────────────────────┘
           │                              │
           ▼                              ▼
┌─────────────────────────────────────────────────────────────┐
│                      BFF API (SSE)                          │
│  POST /api/ai/build-playbook-canvas                         │
│  POST /api/ai/test-playbook-execution                       │
└─────────────────────────────────────────────────────────────┘
```

---

## Graduation Criteria

Project is complete when:

1. [x] User can create complete playbook through natural language
2. [x] Canvas updates in real-time as AI executes operations
3. [x] All three test execution modes work (Mock, Quick, Production)
4. [x] Scope ownership model enforced (SYS- immutable)
5. [x] Save As and Extend create correct scope records
6. [x] Builder-specific scopes created (ACT/SKL/TL/KNW-BUILDER-*)
7. [x] Rate limiting active with 429 responses
8. [x] Dark mode supported with correct theming
9. [x] PCF bundle under 5MB with platform libraries
10. [x] All ADR constraints satisfied

---

## Technical Stack

| Component | Technology |
|-----------|------------|
| Frontend | PCF (TypeScript/React 16), Fluent UI v9, Zustand |
| Backend | .NET 8 Minimal API, SSE streaming |
| AI | Azure OpenAI (GPT-4o, GPT-4o-mini, o1-mini) |
| Storage | Azure Blob (temp), Dataverse (scopes) |

---

## Applicable ADRs

| ADR | Relevance |
|-----|-----------|
| ADR-001 | Minimal API patterns |
| ADR-006 | PCF over webresources |
| ADR-008 | Endpoint filters for auth |
| ADR-013 | AI architecture (extend BFF) |
| ADR-016 | Rate limiting |
| ADR-021 | Fluent UI v9 design system |
| ADR-022 | PCF platform libraries (React 16) |

---

## Team

- **Owner**: AI Architecture Team
- **Branch**: `feature/ai-chat-playbook-builder`

---

*Generated by project-pipeline on 2026-01-16*
